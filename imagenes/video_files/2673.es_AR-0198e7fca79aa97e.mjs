"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[2673],{116629:(e,t,r)=>{r.d(t,{D:()=>l,q:()=>c});var i=r(667294),a=r(616550),n=r(857147),o=r(785893);let s=(0,i.createContext)(!1);function l({children:e}){let t=(()=>{let e=(0,a.TH)(),t=(0,a.k6)();return t.location.state?.isAppFactoryOAuth||((0,n.mB)(e.search).next??"").startsWith("/app-factory-oauth/")})(),[r,l]=(0,i.useState)(t);return(0,i.useEffect)(()=>{t&&l(!0)},[t]),(0,o.jsx)(s,{value:r,children:e})}function c(){return(0,i.useContext)(s)}},890841:(e,t,r)=>{r.d(t,{Z:()=>G});var i=r(616550),a=r(619552),n=r(718369),o=r(20256),s=r(640935),l=r(174646),c=r(538645),d=r(785893);function u({children:e}){let t=(0,s.vs)(),r=(0,c.HG)(),{locale:i}=(0,l.B)(),a={"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"}[i]??"default";return(0,d.jsx)(o.Ag,{colorScheme:t&&!r?"dark":"light",children:(0,d.jsx)(o.Ho,{languageMode:a,children:(0,d.jsx)(o.Ho,{forceTheme:"visualrefresh",languageMode:a,rootSelector:"excludeFromGridRepTests",children:e})})})}function p({children:e}){let t=(0,c.ml)();return(0,d.jsx)(o.Q_,{deviceType:t?"mobile":"desktop",children:e})}let m=["web_gestalt_visualrefresh","web_gestalt_calico"];function h({children:e}){let t=(0,l.B)(),r=m.reduce((e,r)=>({...e,[r]:t.experimentsClient.checkExperiment(r)}),{});return(0,d.jsx)(o.II,{value:r,children:e})}var _=r(667294),g=r(992114);function f(e){(0,g.nP)("gestalt-component-impression",{tags:{component:e}})}var v=r(94970),w=r(840962),y=r(472856);function b({children:e}){let{sheetMobileHandlers:t,linkHandlers:r,radioGroupHandlers:i,datePickerHandlers:a,dateFieldHandlers:n,dateRangeHandlers:s}=function(){let{setAppFocusState:e}=(0,y.G)(),t=(0,_.useCallback)(()=>{v.Z.pause(),e(!1)},[e]),r=(0,_.useCallback)(()=>{v.Z.resume(),e(!0)},[e]),i=(0,_.useMemo)(()=>({onOpen:t,onClose:r}),[t,r]),a=(0,_.useMemo)(()=>({onRender:()=>{f("RadioGroup")}}),[]),n=(0,_.useMemo)(()=>({onRender:()=>{f("DateField")}}),[]),o=(0,_.useMemo)(()=>({onRender:()=>{f("DatePicker")}}),[]),s=(0,_.useMemo)(()=>({onRender:()=>{f("DateRange")}}),[]);return{linkHandlers:(0,_.useMemo)(()=>({onNavigation:({href:e,target:t})=>(0,w.Z)({href:e,target:t})}),[]),sheetMobileHandlers:i,radioGroupHandlers:a,dateFieldHandlers:n,datePickerHandlers:o,dateRangeHandlers:s}}();return(0,d.jsx)(o.uu,{dateFieldHandlers:n,datePickerHandlers:a,dateRangeHandlers:s,linkHandlers:r,radioGroupHandlers:i,sheetMobileHandlers:t,children:e})}var P=r(468318),k=r(250281),x=r(116629),T=r(967312),E=r(622460),I=r(535768),D=r(164651),Z=r(32747),A=r(849289),S=r(17433),N=r(638619),C=r(777344),j=r(331118);let B=e=>["/advertiser/"].reduce((t,r)=>e.includes(r)||t,!1);function O({children:e,immutableLocation:t,routerHistoryAction:r,staticContext:a}){let n=(0,_.useRef)(null),o=(0,_.useRef)(null),s=(0,_.useRef)(t),l=(0,_.useRef)(!0),{path:c,params:u}=(0,i.$B)(),p=(0,_.useRef)(c),m=(0,_.useRef)(u),h=(0,D.Z)(a.deviceType);if(h?(0,I.A9)("supportedPWTBrowser",{tags:{deviceType:a.deviceType}}):(0,I.A9)("unsupportedPWTBrowser",{tags:{deviceType:a.deviceType}}),l.current&&(0,N.ZP)(!0,a.serverData?.trace_id),(0,_.useEffect)(()=>{p.current=c},[c]),(0,_.useEffect)(()=>{m.current=u},[u]),(0,_.useEffect)(()=>{(0,C.UQ)(),l.current=!1},[]),B(t.pathname)?s.current.pathname!==t.pathname:s.current!==t){s.current=t,o.current=window.performance?.now?window.performance.now():null;let{current:e}=o;if(!l.current){let t=!n.current;(0,I.A9)("routeStart",{tags:{action:r}}),(0,j.Eg)(t),(0,C.Ux)(t),(0,C.on)(),(0,S.tl)(),(0,N._T)(),(0,N.ZP)(!1);let{defaultBufferSize:i}=(0,j.LH)();e&&((0,I.A9)("routeStart.defaultBufferSize",{count:i}),n.current={time:e,action:r})}}return(0,d.jsx)(A.Z,{value:h?a:null,children:(0,d.jsx)(Z.Z,{value:n.current,children:e})})}var L=r(623258),R=r(175770),F=r(116657),M=r(349057);function U({children:e,immutableLocation:t,routerHistoryAction:r}){let i=(0,_.useRef)(!0),a=(0,_.useRef)(!1),n=(0,_.useRef)(!1),o=(0,_.useRef)(t),s=performance.now(),{group:l}=(0,T.F)().checkExperiment("web_pwt_validate_suspense");return l&&(0,g.nP)("pwt_logger_v4_render",{sampleRate:1,tags:{experimentGroup:l}}),a.current=a.current||B(t.pathname)?o.current.pathname!==t.pathname:o.current!==t,a.current&&!n.current&&((0,F.yh)("routeChange"),n.current=!0,(0,L.N0)(),l&&(0,g.nP)("pwt_logger_v4_route_change_reset",{sampleRate:1,tags:{experimentGroup:l}})),(0,_.useLayoutEffect)(()=>{if((B(t.pathname)?o.current.pathname!==t.pathname:o.current!==t)||i.current){o.current=t;let e=i.current?0:s;(0,F.ep)(r,e,i.current),(0,M.Nx)("NavigationCompletev4"),i.current=!1,a.current=!1,n.current=!1,l&&(0,g.nP)("pwt_logger_v4_navigation_complete",{sampleRate:1,tags:{experimentGroup:l}})}},[i,r,t,s,a]),e}function H({children:e,immutableLocation:t,routerHistoryAction:r}){return(0,R.Z)()?(0,d.jsx)(L.mW,{children:(0,d.jsx)(U,{immutableLocation:t,routerHistoryAction:r,children:e})}):e}var z=r(751800);function W({children:e,traceLoggerData:t}){let r=(0,l.B)(),a=(0,i.k6)(),n=(0,i.TH)(),{group:o}=(0,T.F)().checkExperiment("web_pwt_validate_suspense"),s=(0,E.Z)({requestContext:r,traceLoggerData:t});return(0,I.iF)(a.action),"enabled_switch_v4_v3"===o?(0,d.jsx)(H,{immutableLocation:n,routerHistoryAction:a.action,children:(0,d.jsx)(O,{immutableLocation:n,routerHistoryAction:a.action,staticContext:s,children:e})}):(0,d.jsx)(O,{immutableLocation:n,routerHistoryAction:a.action,staticContext:s,children:(0,d.jsx)(H,{immutableLocation:n,routerHistoryAction:a.action,children:e})})}function G({children:e,context:t,otaData:r,inContextTranslation:i,requestContext:o,resourceCreator:s,traceLoggerData:l}){let{anyEnabled:c}=(0,T.F)().checkExperiment("web_pwt_validate_suspense"),m=(0,d.jsx)(p,{children:(0,d.jsx)(h,{children:(0,d.jsx)(u,{children:(0,d.jsx)(P.nK,{children:(0,d.jsx)(y.g,{children:(0,d.jsx)(b,{children:(0,d.jsx)(n.Ih,{children:(0,d.jsx)(x.D,{children:(0,d.jsx)(z.UZ,{resourceCreator:s,children:e})})})})})})})})});return(0,d.jsx)(a.E,{value:t,children:c?(0,d.jsx)(W,{traceLoggerData:l,children:(0,d.jsx)(k.Z,{enableInContextTranslation:i,locale:o.locale,otaData:r,children:m})}):(0,d.jsx)(k.Z,{enableInContextTranslation:i,locale:o.locale,otaData:r,children:(0,d.jsx)(W,{traceLoggerData:l,children:m})})})}},754838:(e,t,r)=>{let i,a;r.d(t,{Ch:()=>w,nc:()=>E,a:()=>I,ZP:()=>D,cA:()=>x,li:()=>T});var n=r(172045),o=r(947717),s=r(578373),l=r(203728),c=r(643063),d=r(718369),u=r(659725),p=r(23084),m=r(693806),h=r(136388),_=r(454800),g=r(992114);let f=new Set([6945,170,3700]),v=new Set([3700]),w={3829:"articleImpressions",18:"pinImpressions",3700:"boardImpressions",3803:"searchImpressions",170:"storyImpression",3704:"userImpressions"},y=[4700,4701,4702,4703,7042,7043],b=e=>(0,u.Z)(JSON.stringify(e)),P=e=>f.has(e);function k(){let e=new Date;i?i&&i.getUTCDate()!==e.getUTCDate()&&(i=e,(0,l.Z)()):i=e}let x=e=>{let t=e.event_type,r=y.includes(t),i=(0,d.BE)();return!!r||13===t||!!i},T=(e,t)=>{let r=e.event_type,i=y.includes(r),a=(0,d.BE)();return i?e:13===r&&e.view_type?(t?.({viewType:e.view_type,viewParameter:e.view_parameter,viewData:a?.viewData?(0,p.Z)(a.viewData,e.view_data):e.view_data}),e):!a||e.view_type&&e.view_parameter?e:{...e,view_type:a.viewType||e.view_type,view_parameter:a.viewParameter,view_data:e.view_data?(0,p.Z)(e.view_data,a.viewData):a.viewData}},E=(e,t)=>{let{component:r,element:i}=e,a=e.object_id_str,n=e.view_type,o=e.event_type,{appState:s}=e;return(e.event_data?.[t]||[]).map(l=>{var c;let d;return{auxData:e.aux_data,...r?{component:r}:{},eventData:l,...o?{eventType:o}:{},...n?{viewType:n}:{},viewData:e.view_data,viewParameter:e.view_parameter,...a?{objectIdStr:a}:null,impressionType:t,...(c=e.event_data,d={},c?.storyPinProductEventData&&(d={...d,storyPinProductEventData:c.storyPinProductEventData}),d),appState:s,...i?{element:i}:{}}})??[]},I=(e,t)=>({...e.component?{component:e.component}:{},...e.object_id_str?{objectIdStr:e.object_id_str}:null,...e.view_type?{viewType:e.view_type}:{},eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data});function D(){let e=[],t=[],r=0;function i(){return[...e,...t.reduce((e,t)=>{let r=e.find(e=>e.view_type===t.viewType&&e.view_parameter===t.viewParameter&&e.event_type===t.eventType&&e.object_id_str===t.objectIdStr&&(0,h.Z)(e.view_data,t.viewData));if(r&&!P(t.eventType))t.impressionType in r.event_data?r.event_data[t.impressionType].push(t.eventData):r.event_data[t.impressionType]=[t.eventData];else{let r,i=t.storyPinProductEventData?{storyPinProductEventData:t.storyPinProductEventData}:{},a={appState:t.appState,aux_data:t.auxData||{},clientUUID:(0,n.Z)(),component:t.component,event_data:{...i,[t.impressionType]:!P(r=t.eventType)||P(r)&&v.has(r)?[t.eventData]:{...t.eventData,...(t.eventData||{})[t.impressionType]}},event_type:t.eventType,object_id_str:t.objectIdStr||void 0,time:(0,c.Z)(),view_data:t.viewData,view_parameter:t.viewParameter,view_type:t.viewType,element:t.element};e.push(a)}return e},[])]}function l({error:e,isError:t,isDroppedEvent:r,isImpression:i,isEventSkipped:a}){let n,s=(0,o.Z)(),l=s?.userAgent||{},c=!(l.isMobile||l.isTablet),d={error_message:e?.message??"unknown",appType:c?"WEB_DENZEL":"WEB_MOBILE",country:s?.country??"unknown",browserName:l.browserName,osName:l.osName,browserType:l.browserType,browserVersion:l.browserVersion,isError:t,isImpression:i,isEventSkipped:a};n=r?"dropped":t?"errors":a?"skipped":"success",(0,g.nP)(`webapp.metrics.contextLog.indexdb.${n}`,{tags:d})}async function d(){try{await a?.clear()}catch(e){l({isError:!0,error:{message:"Error while clearing cache",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}function u(){e=[],t=[],r=0}async function p(e){try{let t={...e,cache_created_time:(0,c.Z)(),isImpression:!1,aux_data:{...e.aux_data,is_context_cached:!0}};await a?.setItem((0,n.Z)(),t)}catch(e){l({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function f(e){try{let t={...e,cache_created_time:(0,c.Z)(),isImpression:!0,auxData:{...e.auxData,is_impression_cached:!0}};await a?.setItem((0,n.Z)(),t)}catch(e){l({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function w(){let e=i(),t=0,r=1e3;if(!e.length)return;let a=s.Z.create("ApiCResource",{events:e,report_time:(0,c.Z)()}),n=async()=>{try{await a.callCreate({async:!0,showError:!1}),d()}catch(a){let i=!a?.api_error_code||[m.dO,m.cZ,m.i1].includes(a.api_error_code);if(!function({retryAttempts:e,error:t,events:r}){let i=(0,o.Z)(),a=i?.userAgent||{},n=!(a.isMobile||a.isTablet),s={error_code:t?.api_error_code??"unknown",retryAttempts:e,appType:n?"WEB_DENZEL":"WEB_MOBILE",country:i?.country??"unknown",browserName:a.browserName,eventSize:r.length,osName:a.osName,browserType:a.browserType,browserVersion:a.browserVersion};(0,g.nP)("metrics_quality_web_retry_error_log",{tags:s})}({retryAttempts:t,error:a,events:e}),i&&t<5){let e=r;t+=1,r*=2,setTimeout(n,e)}else d()}};n(),u(),k()}async function y(){try{(await a?.getAllItem()||[]).forEach(r=>{var i,a;let{value:n}=r,{cache_created_time:o,isImpression:s,...d}=n;(i=o,(0,c.Z)()-i>864e11)?l({isDroppedEvent:!0,isError:!1}):(a=o,(0,c.Z)()-a<6e10)?l({isEventSkipped:!0}):s?(t.push(d),l({isImpression:!0,isError:!1})):(e.push(d),l({isError:!1}))})}catch(e){l({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}finally{w(),d()}}return{flushContextEvents:w,getContextEvents:i,logContextEvent:function({object_id_str:t,...i}){let a=(0,c.Z)(),o={aux_data:{},event_data:{},view_data:{},...i,time:a,clientUUID:(0,n.Z)(),...t?{object_id_str:t}:null};o.aux_data=function(e){if(!e)return e;let{element:t,eventData:r,component:i,objectId:a,view:n,viewParameter:o,viewData:s,durationNs:l,pairId:c,clientTrackingParams:d,...u}=e;return u}(o.aux_data),r+b(o)>20480&&w(),e.push(o),r+=b(o),k(),p(o)},logImpression:function(e){r+b(e)>20480&&w(),t.push(e),r+=b(e),f(e)},resetEventsBuffer:u,syncCachedEndEvents:y,_getIndexDBInstance:function(){return a},initiateIndexDBCache:function(){window?.indexedDB&&(a=a||new _.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))}}}},643063:(e,t,r)=>{r.d(t,{Z:()=>a,s:()=>i});let i=()=>{let e,t;return"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},a=()=>1e6*Date.now()},86369:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(420205),a=r(463227),n=r(985630);function o(e,t){let r=Math.round(1e3*Math.random())+"",o=Math.round(1e3*Math.random())+"";a.t8((0,i.GS)(r),o);let s={token:`${r}-${o}`,url:e,...t&&!t.params?t.queryParams:t?.params&&{pin:t.params.pinId??void 0,isThirdPartyAd:t.params.isThirdPartyAd??void 0,csr:t.params.csrId&&!t.params.pinId?t.params.csrId:void 0,client_tracking_params:t.params.clientTrackingParams,aux_data:t.params.auxData?JSON.stringify(t.params.auxData):void 0}};return`/offsite/?${(0,n.Z)(s)}`}},687979:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(397657),a=r(43535),n=r(733668);let o=async({clientTrackingParams:e,href:t,pinId:r,spamCheckCallback:o})=>{let s=await function(e){let t=(0,a.Z)(e),r=n.y8.get("ApiResource",t);if(r)return r;let o=(0,i.Z)(e);return n.y8.add("ApiResource",t,o),o}({url:"/v3/offsite/",data:{check_only:!0,client_tracking_params:e,pin_id:r,url:t}});if(!s.resource_response.error){let{message:e,redirect_status:t,url:r}=s.resource_response.data||{};o({blocked:["blocked","suspicious","porn"].includes(t),message:e,redirectStatus:t,sanitized_url:r})}}},840305:(e,t,r)=>{r.d(t,{Z:()=>i});function i({isOffsiteUrl:e,event:t}){return!e&&(t.metaKey||t.ctrlKey)}},44041:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(779947),a=r(712151),n=r(171764),o=r(859930),s=r(440118);let l=({event:e,onHistoryChange:t,href:r,history:l,target:c})=>{let d=(0,a.Z)(r),u=("string"!=typeof r&&r?r.state:null)??{},p=(0,n.Z)(d);p===s.Z.TRUSTED_DIFFERENT_ORIGIN||"blank"===c?(0,i.Z)(d,"blank"===c):l&&p===s.Z.SAME_ORIGIN&&(l.push((0,o.Z)({url:d}),{from:l.location,...u}),t&&t({event:e}))}},948694:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(779947),a=r(86369);function n(e,t){(0,i.Z)((0,a.Z)(e,t),!0,t?.features)}},608351:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(229865);function a({location:e,pinId:t,surface:r}){return!!r&&!i.ZF.includes(r)||e.pathname.includes(t)}},840962:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(667294),a=r(616550),n=r(687979),o=r(840305),s=r(44041),l=r(608351),c=r(725107),d=r(712151),u=r(611395),p=r(423188),m=r(992114);function h(e){let{clientTrackingParams:t,externalData:r,href:h,onHistoryChange:_,target:g}=e,[f,v]=(0,i.useState)(null),w=(0,a.k6)(),y=(0,a.TH)(),b=(0,d.Z)(h),P=(0,u.Z)({url:b}),{showWarning:k}=(0,p.n)()??{},{pin:x,surface:T}=r||{},E=t||x?.trackingParams,I=(0,c.Z)();return(0,i.useEffect)(()=>{P&&x&&null===f&&(!x.promoter||x.isDownstreamPromotion)&&(0,l.Z)({location:y,pinId:x.entityId,surface:T})&&(0,n.Z)({clientTrackingParams:E,pinId:x.entityId,spamCheckCallback:e=>v(e),href:b})},[E,x,T,b,P,y,f]),({event:e})=>{if(!(0,o.Z)({isOffsiteUrl:P,event:e})){if(e.preventDefault(),!h||"string"==typeof h&&h.startsWith("#"))return void(0,m.nP)("link_navigation_empty_href",{sampleRate:1,tags:{route:y.pathname,href:h}});P||r?.dangerouslyForceOffsiteUrl?I({auxData:r?.auxData,clientTrackingParams:E,pin:r?.pin&&{attributionSourceId:r.pin.attributionSourceId,campaignId:r.pin.campaignId,isPromoted:r.pin.isPromoted,pinPromotionId:r.pin.pinPromotionId,isThirdPartyAd:r.pin.isThirdPartyAd,advertiserId:r.pin.advertiserId,destinationUrl:r.pin.destinationUrl,link:r.pin.link,domain:r.pin.domain},pinId:r?.pin?.entityId,queryParams:r?.queryParams,showWarning:k,spamCheck:f,url:b}):(0,s.Z)({event:e,href:h,history:w,onHistoryChange:_,target:"blank"===g?"blank":null})}}}},725107:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(947717),a=r(691772),n=r(30694),o=r(576183),s=r(779947),l=r(19963),c=r(86369),d=r(948694),u=r(204682);let p=e=>{let t=(()=>{let{logContextEvent:e}=(0,l.v)();return({attributionSourceId:t,auxData:r,campaignId:s,clientTrackingParams:l,href:d,isPromoted:u,pinId:p,pinPromotionId:m,isThirdPartyAd:h,advertiserId:_,destinationUrl:g,link:f,domain:v})=>{if(!u)return!1;let w=(0,i.Z)(),y={params:{pinId:p,csrId:null,clientTrackingParams:l,auxData:r,isThirdPartyAd:h}},b=(0,c.Z)(d,y);w?.experimentsClient.checkExperiment("web_ad_destination_url").anyEnabled&&u&&d===g&&(fetch((0,c.Z)(g,y),{redirect:"manual"}),b=g);let P=w?.userAgent.browserName??"";if((0,o.G6)(P)){let r=w?.userAgent.browserVersion?w.userAgent.browserVersion:"0.0",i=parseFloat(r.split(".")[0]+"."+r.split(".")[1]);if(t&&i>=14.1){var k=b;let r=document.createElement("a");return r.setAttribute("href",k),r.setAttribute("target","_blank"),r.setAttribute("rel","noopener nofollow noreferrer"),r.style.cursor="pointer",r.style.display="block",r.setAttribute(a.$N.ATTRIBUTION_SOURCE_ID,t),r.setAttribute(a.$N.ATTRIBUTE_DESTINATION,d),r.setAttribute(a.$N.ATTRIBUTE_ON,d),r.click(),e({event_type:101,clientTrackingParams:l,object_id_str:p||"",aux_data:{pin_id:p||"",click_measurement_ppid:m||"",click_measurement_campaign_id:s||"",is_pcm:!0,attribution_source_id:t,page_url:d}}),!0}}else if((0,o.i7)(P)&&window.document.featurePolicy?.allowsFeature("attribution-reporting")){var x=b;let r=(0,n.Z)(t,[g,f,v],!0,s,_),i=document.createElement("a");return i.setAttribute("href",x),i.setAttribute("target","_blank"),i.setAttribute("rel","noopener nofollow noreferrer"),i.style.cursor="pointer",i.style.display="block",i.setAttribute(a.NR.SOURCE,r),i.click(),e({event_type:101,clientTrackingParams:l,object_id_str:p||"",aux_data:{pin_id:p||"",click_measurement_ppid:m||"",click_measurement_campaign_id:s||"",is_arapi:!0,attribution_source_id:t,page_url:d}}),!0}return!1}})();return({auxData:r,clientTrackingParams:a,pin:n,pinId:o,queryParams:l,showWarning:p,spamCheck:m,url:h})=>{if("undefined"!=typeof window&&window.Windows)return void(0,u.Z)(h,{clientTrackingParams:a,pinId:o,hasPin:!!n,auxData:r,isThirdPartyAd:n?.isThirdPartyAd});if(!n&&!e?.isFromClickthroughLink)return void(0,d.Z)(h,l?{queryParams:l}:{params:{pinId:o}});if(m?.blocked)return void p?.(m);if(n&&t({attributionSourceId:n.attributionSourceId,auxData:r,campaignId:n.campaignId?String(n.campaignId):null,clientTrackingParams:a,href:h,isPromoted:n.isPromoted,pinId:o,pinPromotionId:n.pinPromotionId?String(n.pinPromotionId):null,isThirdPartyAd:n.isThirdPartyAd,advertiserId:n.advertiserId?n.advertiserId:null,destinationUrl:n.destinationUrl,link:n.link,domain:n.domain}))return;let _={params:{clientTrackingParams:a,auxData:r,pinId:o,isThirdPartyAd:n?.isThirdPartyAd}},g=(0,i.Z)();if(g?.experimentsClient.checkExperiment("web_ad_destination_url").anyEnabled&&n?.isPromoted&&h===n?.destinationUrl){fetch((0,c.Z)(h,_),{redirect:"manual"}),(0,s.Z)(h,!0);return}(0,d.Z)(h,_)}}},32747:(e,t,r)=>{r.d(t,{Z:()=>i});let i=(0,r(667294).createContext)(null)},849289:(e,t,r)=>{r.d(t,{Z:()=>i});let i=(0,r(667294).createContext)(null)},454800:(e,t,r)=>{r.d(t,{Z:()=>i});class i{constructor(e,t="myDatabase",r="myStore"){var i,a,n;i="cache",a=new Map,(i="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?n:n+"")in this?Object.defineProperty(this,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[i]=a,this.dbName=t,this.storeName=r,this.dbPromise=(async()=>{try{return await this.initializeDB(e)}catch{return null}})()}async initializeDB(e){return new Promise((t,r)=>{try{let i=e.open(this.dbName,1);i.onerror=()=>{r(Error("IndexedDB initialization error: "+i.error))},i.onupgradeneeded=()=>{let e=i.result;e.objectStoreNames.contains(this.storeName)||e.createObjectStore(this.storeName,{keyPath:"key"})},i.onsuccess=()=>{t(i.result)}}catch(e){r(Error("IndexedDB initialization error: "+e))}})}async reopenDatabaseIfClosed(){let e=await this.dbPromise;return e&&!e.close?e:(this.dbPromise=this.initializeDB(window.indexedDB),this.dbPromise)}async getObjectStore(e="readwrite"){let t=await this.reopenDatabaseIfClosed();return t?t.transaction(this.storeName,e).objectStore(this.storeName):null}async getItem(e){if(this.cache.has(e))return this.cache.get(e)??null;let t=await this.getObjectStore();return t?new Promise((r,i)=>{let a=t.get(e);a.onerror=()=>i(a.error),a.onsuccess=()=>{let t=a.result?.value||null;null!==t&&this.cache.set(e,t),r(t)}}):null}async getAllItem(){let e=await this.getObjectStore();return e?new Promise((t,r)=>{let i=e.getAll();i.onerror=()=>r(i.error),i.onsuccess=()=>{i.result?.forEach(e=>{this.cache.set(e.key,e.value)}),t(i.result)}}):null}async setItem(e,t){this.cache.set(e,t);let r=await this.getObjectStore();return r?new Promise((i,a)=>{let n=r.put({key:e,value:t});n.onerror=()=>{a(n.error)},n.onsuccess=()=>{i(null)}}):null}async removeItem(e){this.cache.delete(e);let t=await this.getObjectStore();return t?new Promise((r,i)=>{let a=t.delete(e);a.onerror=()=>i(a.error),a.onsuccess=()=>r(null)}):null}async clear(){this.cache.clear();let e=await this.getObjectStore();return e?new Promise((t,r)=>{let i=e.clear();i.onerror=()=>r(i.error),i.onsuccess=()=>t(null)}):null}}},640607:(e,t,r)=>{let i;r.d(t,{w:()=>_});var a=r(947717),n=r(643063),o=r(454800),s=r(726462),l=r(32526),c=r(992114);function d(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let u=null,p="ACTIVE",m="PAUSED",h=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"";function _({contextLogger:e}){if(i||(i=window?.indexedDB?new o.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),u)return u;let t=new Map,r=(0,l.Z)()&&(0,l.Z)().debug_timespent,_=[],g=r?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};return console.group||(g.group=(...e)=>console.log(...e),g.groupEnd=(...e)=>{}),u=new class{constructor(){d(this,"appTimedPair",null),d(this,"clickthroughProperties",null),d(this,"historyStackContext",null),d(this,"offsiteTimedPair",null),d(this,"offsiteTimedPairForegroundId",null),d(this,"pins",Object.freeze({})),d(this,"addEventListeners",()=>{var e;let t,{hidden:r,visibilityChange:i}=(0,n.s)(),a=e=>{document[r]?this.unregisterApp(void 0,e):this.registerApp()};i&&document.addEventListener(i,a,!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",e=>this.unregisterApp(void 0,e));let o=(e=e=>this.unregisterApp(void 0,e),t=!1,(...r)=>{t||(t=!0,e(...r))});window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o);let s=navigator&&navigator.userAgent.toLowerCase();s&&s.includes("macintosh")&&s.includes("chrome")&&window.addEventListener("popstate",()=>{document.hasFocus()||document[r]||(0,c.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),d(this,"storeClickthroughProperties",e=>{this.clickthroughProperties&&(0,c.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),this.clickthroughProperties={time:(0,n.Z)(),...e}}),d(this,"clearClickthroughProperties",()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null}),d(this,"registerApp",()=>{g.group("App Foreground",h()),null==this.appTimedPair?(this.appTimedPair=new s.Z,this.appTimedPair.start(),this._unpauseAllComponents(),this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&e.logContextEvent({event_type:4700,pair_id:this.appTimedPair.uuid})):g.error("TimedPair already exists for app."),g.groupEnd()}),d(this,"logIndexDbStatLog",({error:e,isError:t,isDroppedEvent:r})=>{let i,n=(0,a.Z)(),o=n?.userAgent||{},s=!(o.isMobile||o.isTablet),l={error_message:e?.message??"unknown",appType:s?"WEB_DENZEL":"WEB_MOBILE",country:n?.country??"unknown",browserName:o.browserName,osName:o.osName,browserType:o.browserType,browserVersion:o.browserVersion,isError:t,errorName:e?.errorName??"unknown",errorDetails:e?.details??"unknown",errorStackTrace:e?.stack_trace??"unknown"};i=r?"dropped":t?"errors":"success",(0,c.nP)(`webapp.metrics.timespent.indexdb.${i}`,{tags:l})}),d(this,"unregisterApp",(t=!1,r)=>{g.group("App Background",h());let{appTimedPair:i}=this;if(null!=i){this._pauseAllComponents();let t=i.end();this._startOffsiteTimedPair(),e.logContextEvent({event_type:4701,duration_ns:t,pair_id:i.uuid}),this.appTimedPair=null}else g.error("No TimedPair found for app.");let a=["beforeunload","pagehide"],n=a.includes(r?.type||""),o=a.includes(r?.pauseReason||"");(n||o)&&this._endOffsiteTimedPair(),t||e.flushContextEvents(),g.groupEnd()}),d(this,"_activateComponent",t=>{g.group("Activating component",h()),r&&g.log(t.getContext());let i=t.getTimedPair();if(i){i.start();let{view:r,viewParameter:a,component:n,element:o,objectId:s,clientTrackingParams:l}=t.getLoggerContext();e.logContextEvent({event_type:4702,view_type:r,view_parameter:a,component:n,element:o,object_id_str:s,view_data:t.props.viewData,pair_id:i.uuid,clientTrackingParams:l,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}g.groupEnd()}),d(this,"_deactivateComponent",t=>{g.group("Deactivating component",h()),r&&g.log(t.getContext());let i=t.getTimedPair();if(i){let{view:r,viewParameter:a,component:n,element:o,objectId:s,clientTrackingParams:l}=i,c=i.end();e.logContextEvent({event_type:4703,view_type:r,view_parameter:a,component:n,element:o,object_id_str:s,view_data:t.props.viewData,duration_ns:c,pair_id:i.uuid,clientTrackingParams:l,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}g.groupEnd()}),d(this,"_startOffsiteTimedPair",()=>{let{clickthroughProperties:t}=this;t&&(this.offsiteTimedPair=new s.Z({...t,view:186,viewParameter:t.view_parameter,objectId:t.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,t.aux_data={...t.aux_data,time_to_offsite:void 0!==t.time&&null!==t.time&&"number"==typeof t.time?(0,n.Z)()-t.time:void 0},e.logContextEvent({...t,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...t.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}}),this._addOffSitePairToIndexDB({offsiteTimedPairUUID:this.offsiteTimedPair?.uuid,clickthroughProperties:t,timeCreated:this.offsiteTimedPair?.startTime,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId}))}),d(this,"_endOffsiteTimedPair",()=>{let{offsiteTimedPair:t,clickthroughProperties:r}=this;if(t&&r){let i=t.end();e.logContextEvent({...r,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...r.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:i}),this._removeOffSitePairByIdFromIndexDB(this.offsiteTimedPair?.uuid),this._syncCachedTimedPairEndEvents(),this._onOffsiteEnd(),this.clearClickthroughProperties()}else this._syncCachedTimedPairEndEvents()}),d(this,"_addOffSitePairToIndexDB",async({offsiteTimedPairUUID:e,clickthroughProperties:t,timeCreated:r,offsiteTimedPairForegroundId:a})=>{try{await i?.setItem(e,{clickthroughProperties:{...t},timeCreated:r,offsiteTimedPairForegroundId:a})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_addAppTimerToIndexDB",async({foregroundAppTimerUUID:e,timeCreated:t})=>{try{await i?.setItem(e,{timeCreated:t})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_removeAppTimerFromIndexDB",async({foregroundAppTimerUUID:e})=>{try{if(!e)return;await i?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_removeOffSitePairByIdFromIndexDB",async e=>{try{if(!e)return;await i?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_syncCachedTimedPairEndEvents",async()=>{try{(await i?.getAllItem()||[]).forEach(async t=>{var r;let{key:i,value:a}=t,{clickthroughProperties:n,timeCreated:o,offsiteTimedPairForegroundId:l}=a,c=(0,s.h)();o&&(r=o,(0,s.h)()-r>864e11)?this.logIndexDbStatLog({isDroppedEvent:!0,isError:!1}):(e.logContextEvent({...n,event_type:4703,view_type:186,pair_id:i||null,aux_data:{...n?.aux_data,time_spent_foreground_pairid:l,is_timed_pair_cached:!0},duration_ns:o?c-o:null}),this.logIndexDbStatLog({isError:!1}))}),await i?.clear()}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),d(this,"_onOffsiteEnd",()=>{g.group("Trigger onOffsiteEndCallbacks"),_.forEach(e=>e({appTimedPair:this.appTimedPair,clickthroughProperties:this.clickthroughProperties,offsiteTimedPair:this.offsiteTimedPair,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId})),g.groupEnd()}),d(this,"_pauseAllComponents",()=>{g.group("Pause all components"),t.forEach((e,t,r)=>{e===p&&this._deactivateComponent(t),r.set(t,m)}),g.groupEnd()}),d(this,"_unpauseAllComponents",()=>{g.group("Unpause all components"),t.forEach((e,r)=>{let i=new s.Z(r.getLoggerContext());r.setTimedPair(i,()=>{t.set(r,p),this._activateComponent(r)})}),g.groupEnd()})}setHistoryStackContext(e){this.historyStackContext=e}setPins(e){this.pins=e}startOffsiteRightClickTimedPair(t=!1){this._startOffsiteTimedPair(),t||e.flushContextEvents()}registerComponent(e){null===this.appTimedPair?t.set(e,m):(t.set(e,p),this._activateComponent(e))}unregisterComponent(e){t.get(e)===p&&(this._deactivateComponent(e),e.setTimedPair(new s.Z(e.getLoggerContext()))),t.delete(e)}size(){return t.size}onOffsiteEnd(e){_.push(e)}removeOnOffsiteEnd(e){let t=_.indexOf(e);t>-1&&_.splice(t,1)}_getIndexDBInstance(){return i}_getContextLogger(){return e}_clearTimeSpentManager(){u=null}}}},712151:(e,t,r)=>{r.d(t,{Z:()=>i});let i=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},859930:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(600009);let a=({url:e})=>{let t=(0,i.Z)("/");return 0===e.lastIndexOf(t,0)?e.substr(t.length-1):e}},204682:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(397657),a=r(948694);function n(e,t){let{auxData:r,clientTrackingParams:n,hasPin:o,pinId:s,isThirdPartyAd:l}=t||{},c={pin_id:s,check_only:!0,client_tracking_params:o?n:void 0,url:e,aux_data:JSON.stringify(r)};l&&(c.third_party_ad=s,delete c.pin_id),(0,i.Z)({url:"/v3/offsite/",data:c}).then(t=>{if(t&&t.resource_response&&!t.resource_response.error){let{resource_response:e}=t,{redirect_status:r,url:i}=e.data;if(!["blocked","suspicious","porn"].includes(r)){if(window.Windows.Foundation&&window.Windows.System&&window.Windows.System.Launcher&&window.Windows.System.Launcher.launchUriAsync){let e=new window.Windows.Foundation.Uri(i);window.Windows.System.Launcher.launchUriAsync(e)}return}}(0,a.Z)(e,{params:o?{pinId:s,clientTrackingParams:n,auxData:r,isThirdPartyAd:l}:{pinId:s}})})}},229865:(e,t,r)=>{r.d(t,{Wv:()=>a,ZF:()=>i,zI:()=>n,zl:()=>o});let i=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],a=["ArticleProductsStory","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","RelatedProductsFeed","UserProfilePinGrid","ShoppingGridShippedMetadataWithVisitButton"],n=[...a,"ShoppingGridShippedMetadata","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ProductPinsFeed","ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","SearchAdsOnlyModule","ShoppingTool","ProductPinRetrieval"],o=["ShoppingSquareGridDomain","ShoppingGridShippedMetadata","ShoppingGridShippedMetadataWithVisitButton"]},423188:(e,t,r)=>{r.d(t,{Z:()=>g,n:()=>_});var i=r(667294),a=r(218291),n=r(608575),o=r(20256),s=r(852015),l=r(233846),c=r(51340),d=r(785893);let u=()=>{let e=(0,l.ZP)(),{dismissWarning:t}=_()??{};return(0,d.jsx)(o.xu,{paddingX:3,children:(0,d.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:t,text:e.bt("Aceptar", "Okay", "Dismiss a modal stating that clicking through to a link has been blocked", undefined, true)})})},p=()=>{let e=(0,l.ZP)();return(0,d.jsx)(o.xv,{inline:!0,weight:"bold",children:(0,d.jsx)(o.rU,{display:"inlineBlock",href:"https://policy.pinterest.com/community-guidelines#section-spam",target:"blank",underline:"hover",children:e.bt("Más información", "Learn more", "Link text leading to policy website", undefined, true)})})},m=({message:e,sanitized_url:t})=>{let r=(0,l.ZP)(),{dismissWarning:i}=_()??{};return(0,d.jsx)(s.ZP,{accessibilityModalLabel:r.bt("Bloqueamos este enlace", "We have blocked this link", "Modal label when clicking a spammy link", undefined, true),footer:(0,d.jsx)(u,{}),heading:r.bt("¡Atención!", "Heads up!", "Modal heading when clicking through to a link has been blocked", undefined, true),onDismiss:i,children:(0,d.jsxs)(o.xu,{padding:6,children:[(0,d.jsx)(o.xv,{children:(0,c.nk)("{{ message }} {{ learnMore }}",{message:e,learnMore:(0,d.jsx)(p,{},"learnMoreLink")})}),(0,d.jsxs)(o.xu,{alignItems:"center",display:"flex",marginTop:4,children:[(0,d.jsx)(o.xu,{marginEnd:3,children:(0,d.jsx)(o.JO,{accessibilityLabel:r.bt("Dirección de enlace bloqueada", "Blocked link address", "Icon label preceding a block url", undefined, true),color:"error",icon:"report",inline:!0,size:24})}),(0,d.jsx)(o.xv,{inline:!0,lineClamp:1,weight:"bold",children:n.parse(t).hostname})]})]})})},{Provider:h,getMaybe:_}=(0,a.Z)("SpammyClickthrough");function g({children:e}){let[t,r]=(0,i.useState)(null),a=(0,i.useCallback)(()=>{r(null)},[r]),n=(0,i.useCallback)(e=>{r(e)},[r]),o=(0,i.useMemo)(()=>({dismissWarning:a,showWarning:n}),[a,n]);return(0,d.jsxs)(h,{value:o,children:[t&&(0,d.jsx)(m,{...t}),e]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/2673.es_AR-0198e7fca79aa97e.mjs.map