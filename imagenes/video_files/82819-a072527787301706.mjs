"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[82819],{75198:(e,t,r)=>{r.d(t,{D:()=>s,G:()=>o});var a=r(611577);function o(e={},t){switch(t.type){case a.V$:let{experienceId:r,placementId:s,status:i}=t.payload,n={...e},l=n[s]||[],d=l.findIndex(e=>e.experience_id===r);return d>=0&&(["completed","dismissed"].includes(i)?l.splice(d,1):l[d].status=i),n;case a.$S:let{experiencesMulti:_}=t.payload;return{..._};default:return e}}function s(e={},t){switch(t.type){case a.iY:let{placementId:r,status:o}=t.payload,i={...e};return i[r]&&(["completed","dismissed"].includes(o)?delete i[r]:i[r].status=o),i;case a.mR:return{...e,...t.payload.experiences};case a._4:let{experiences:n}=t.payload;return{...n};default:return e}}},216307:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(43535),o=r(741594),s=r(874322);let i=e=>({api_error_code:e.api_error_code,code:e.code,message:e.message,message_detail:e.message_detail,extraData:e.extraData||e.extra_data||void 0,httpStatus:e.httpStatus||e.http_status||void 0});function n(e={},t){if(t.type===s.se){let r={...e||{},[t.payload.resource]:{...(e||{})[t.payload.resource]||Object.freeze({})}},o="string"==typeof t.payload.optionsOrOptionsKey?t.payload.optionsOrOptionsKey:(0,a.Z)(t.payload.optionsOrOptionsKey);return delete r[t.payload.resource][o],0===Object.keys(r[t.payload.resource]).length&&delete r[t.payload.resource],r}if(t.type===s.zP||t.type===s.aW||t.type===s.cR||t.type===s.KK){let{options:r,resource:n}=t.payload,l=(0,a.Z)(r),d=e?.[n]||{},_=function(e,t){switch(e.type){case s.KK:return{...t||{},fetching:e.payload.isFetching,error:null};case s.cR:return{...t||{},fetching:!1,error:i(e.payload.error),data:null};default:let r,{options:a,resource:n,response:l}=e.payload,d=e.type===s.zP&&e.payload.isRefresh,_=(r=a?.bookmarks||l.bookmarks)&&r[0]!==o.qx?r[0]:o.qx,u=l.resource_response.error?i(l.resource_response.error):void 0,c=t?.auxData,p=d?void 0:t?.data,E=l.resource_response.data,y=l.auxData;if(("BaseSearchResource"===n||"VisualLiveSearchResource"===n||"StoreFrontSearchResource"===n||"VisualSearchFlashlightUnifiedResource"===n||"NativeInteractionsResource"===n)&&p?Array.isArray(p.results)&&(E=E?{...p,results:[...p.results||[],...E.results||[]]}:p):Array.isArray(p)&&(E=[...p||[],...E||[]]),"VisualSearchFlashlightUnifiedResource"===n&&c){let e=y.metadata.one_bar_modules||c.metadata.one_bar_modules;y.metadata.one_bar_modules=e}return{...t||{},auxData:c?{...c,...y}:y,data:E,fetching:!1,nextBookmark:_,error:u}}}(t,d[l]);return{...e,[n]:{...d,[l]:_}}}return e}},844678:(e,t,r)=>{function a(e,t,r,a){var o;let s=(o=e,t?"shop":0===o||2===o?"trending":1===o?"best":3===o?"article":"article"),i=r.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-");return`/today/${s}/${encodeURIComponent(i)}/${a}/`}r.d(t,{T7:()=>a,Y_:()=>s,d9:()=>n,nx:()=>i,xt:()=>o}),r(817349);let o=(e,t,r)=>e||t||r||"",s=e=>"todayarticle"===e.type,i=e=>Array.isArray(e)&&e.length>0&&e.every(e=>"story"===e.type),n=(e,t)=>(e??1)/(t??1)},817349:(e,t,r)=>{r.d(t,{Z:()=>a});let a={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]}},454310:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(243694);function o(e){return e&&e.id?{allow_personalization_cookies:e.allow_personalization_cookies??!1,allow_analytic_cookies:e.allow_analytic_cookies??!1,allow_marketing_cookies:e.allow_marketing_cookies??!1,avatar_color_index:e.avatar_color_index,boardCount:e.board_count,groupBoardCount:e.group_board_count,secretBoardCount:e.secret_board_count,pinCount:e.pin_count,eligibleForStlTool:e.eligible_for_stl_tool,isAuth:!0,id:e.id,epik:e.epik,username:e.username,fullName:e.full_name??"",firstName:e.first_name??"",lastName:e.last_name??"",email:e.email??"",facebookId:e.facebook_id,hasPassword:e.has_password??!1,hasPublishedPins:e.has_published_pins,isEmployee:e.is_employee??!1,isEligibleForCoreActionsHeader:e.is_eligible_for_core_actions_header??!1,isEligibleForImageOnlyGrid:e.is_eligible_for_image_only_grid??!1,isLimitedLogin:e.login_state===a.Z.LIMITED,isMaturedNewUser:e.is_matured_new_user??!1,isPartner:e.is_partner??!1,isPrivateProfile:e.is_private_profile??!1,isUnder16:e.is_under_16??!1,isUnder18:e.is_under_18??!1,isWriteBanned:e.is_write_banned??!1,imageSmallUrl:e.image_small_url??"",imageMediumUrl:e.image_medium_url??"",imageLargeUrl:e.image_large_url??"",imageXLargeUrl:e.image_xlarge_url??"",nags:e.nags??[],profileDiscoveredPublic:e.profile_discovered_public??!1,shouldDefaultCommentsOff:e.should_default_comments_off,showDiscoveredFeed:e.show_discovered_feed??!1,createdAt:e.created_at??"",resurrectionInfo:e.resurrection_info&&e.resurrection_info.resurrection_dt?{resurrectionDate:e.resurrection_info.resurrection_dt}:void 0,country:e.country??"",domainUrl:e.domain_url,domainVerified:e.domain_verified,isAnyWebsiteVerified:e.is_any_website_verified,verifiedWebsites:e.verified_user_websites,listedWebsiteUrl:e.listed_website_url??"",gender:e.gender,customGender:e.custom_gender,firstHomeFeedRequestAfterNux:e.firstHomeFeedRequestAfterNux??!1,partner:e.partner,socialNetwork:{facebook:{connected:!!e.connected_to_facebook},google:{connected:!!e.connected_to_google},youtube:{connected:!!e.connected_to_youtube},gplus:{connected:!!e.gplus_url,url:e.gplus_url},microsoft:{connected:!!e.connected_to_microsoft},twitter:{connected:!!e.twitter_url,url:e.twitter_url},etsy:{connected:!!e.connected_to_etsy},instagram:{connected:!!e.connected_to_instagram,username:e.instagram_data?.username,url:e.instagram_data?.url},dropbox:{connected:!!e.connected_to_dropbox}},can_enable_mfa:e.can_enable_mfa??!1,has_mfa_enabled:e.has_mfa_enabled??!1,is_sso_user:e.is_sso_user??!1,has_quicksave_board:e.has_quicksave_board,phone_country:e.phone_country??"",phone_number:e.phone_number??"",phone_number_end:e.phone_number_end??"",push_package_user_id:e.push_package_user_id??"",third_party_marketing_tracking_enabled:void 0===e.third_party_marketing_tracking_enabled||null===e.third_party_marketing_tracking_enabled||e.third_party_marketing_tracking_enabled,age_in_years:e.age_in_years,save_behavior:e.save_behavior,shopping_rec_disabled:e.shopping_rec_disabled,show_personal_boutique:e.show_personal_boutique??!1,should_show_messaging:e.should_show_messaging??!1,isParentalControlPasscodeEnabled:e.is_parental_control_passcode_enabled??!1,isParentalControlPasscodeVerificationPending:e.is_parental_control_passcode_verification_pending??!1,isCandidateForParentalControlPasscode:e.is_candidate_for_parental_control_passcode??!1,parentalControlAnonymizedEmail:e.parental_control_anonymized_email??"",teenSafetyOptionsUrl:e.teen_safety_options_url??"",weight_loss_ads_opted_out:e.weight_loss_ads_opted_out??!1}:{isAuth:!1,isLimitedLogin:!1}}},421764:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(23084);let o=function(e,t){return(r,o)=>{let s=t(r,o);if(o.payload&&!Array.isArray(o.payload)){let{normalizedResponse:t}=o.payload;if(t&&t.entities&&t.entities[e]){var i;return Object.keys(i=t.entities[e]).reduce((e,t)=>({...e,[t]:(0,a.Z)(e[t],i[t])}),s)}}return s}}},575838:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(14890),o=r(753894),s=r(237997);let i=[o.Z,e=>t=>r=>{if("ERROR_LOG_EVENT"===r.type){let{error:e,auxData:a}=r;return(0,s.H)(e,a),t(r)}try{return t(r)}catch(t){return(0,s.H)(t||Error("unknown error"),{action:r}),e.getState()}}],n=()=>(0,a.applyMiddleware)(...i)},935198:(e,t,r)=>{r.d(t,{Z:()=>T});var a=r(422578),o=r(172045),s=r(316886),i=r(23084),n=r(874322),l=r(581288),d=r(421764),_=r(844678);let u=e=>e||[],c=e=>e?e.reduce((e,t)=>t?.objects?e.concat(t.objects):e.concat([t].filter(Boolean)),[]):[],p=e=>e&&Array.isArray(e)?e.map(e=>e.content_pin).filter(e=>!!e):[],E={ApiResource:e=>{if(e&&Array.isArray(e)){let t=[];return e.forEach(e=>{e.call_to_create_source_pin_id?t.push(e):"story"===e.type&&e.objects&&Array.isArray(e.objects)?e.objects.forEach(e=>{t.push(e)}):"pin"===e.type&&t.push(e)}),t}return[]},BaseSearchResource:e=>e?c(e.results):[],BoardContentRecommendationResource:u,BoardFeedResource:u,BoardlessPinsResource:u,BoardSectionPinsResource:u,BoardShopSavedProductsFeedResource:u,BrandCatalogFeedResource:u,CategoryFeedResource:u,DomainFeedResource:u,InterestResource:e=>e?e.results:[],LiveSessionProductsResource:e=>e?Object.values(e).reduce((e,t)=>e.concat(t),[]):[],NewsHubDetailsResource:e=>e?e.reduce((e,t)=>t.content_items?e.concat(t.content_items.map(e=>e.content_object).filter(Boolean)):e,[]):[],PinterestPicksFeedResource:u,RelatedModulesResource:c,RelatedPinFeedResource:u,RelatedStreamResource:u,SearchResource:u,TaggedObjectsResource:c,TodayArticleFeedResource:e=>(0,_.nx)(e)?e.reduce((e,t)=>{if(Array.isArray(t.objects)){let r=[];return t.objects.forEach(e=>{"todayarticle"===e.type&&e.content_pin?.type==="pin"?r.push(e.content_pin):"pin"===e.type&&r.push(e)}),e.concat(r)}return e},[]):e||[],TodayTabInterestFeedResource:p,TodayTabResource:p,TopicFeedResource:u,UserHomefeedResource:c,UserActivityPinsResource:u,UserRecentActivityResource:u,UserStoryPinsFeedResource:u,UserPinsResource:u,VisualLiveSearchResource:e=>e?e.results:[],VisualLiveSearchProductFeedResource:u,VisualLinkVisualSearchResource:u,VisualSearchFlashlightUnifiedResource:e=>e?c(e.results):[],BestPinsFeedAltResource:u,StoryFeedResource:c};var y=r(242792);let f=(e,t,r=!1)=>{let a=(0,i.Z)(e,t,r?(e,t)=>null===t?e:void 0:void 0);return(0,s.ZP)(e,a)?e:a},R=(e,t)=>({...e,[t.id]:{...e[t.id]||{},...t}});function m(e,t){let r=(0,y.Ig)();switch(t.type){case"CHANGE_CAROUSEL_SLOT_INDEX":{let{id:r,index:a}=t.payload;if(r===e.id&&e.carousel_data)return{...e,carousel_data:{...e.carousel_data,index:a}};return e}case"SET_PIN_COMMENTS_DISABLED":{let{id:r,pinCommentsDisabled:a}=t.payload;if(r===e.id)return{...e,comments_disabled:a,is_eligible_for_aggregated_comments:!a};return e}case"PIN_SAVE":{let{boardId:o,localPinId:s,id:i,title:n,url:l,nodeId:d}=t.payload;if(i===e.id)return r&&d&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(d);t||(t=e.create(d,"Pin"));let r=t.getOrCreateLinkedRecord("savedInfo","SaveTarget");r.setValue(o,"boardId"),r.setValue(s,"localPinId"),r.setValue(null,"score"),r.setValue(null,"sectionId"),r.setValue__UNSAFE(n,"title"),r.setValue(null,"type"),r.setValue(l,"url")}),{...e,savedInfo:{boardId:o,title:n,url:l,localPinId:s}};return e}case"PIN_UNSAVE":{let{id:o,nodeId:s}=t.payload;if(o===e.id){r&&s&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(s);t&&t.setValue(null,"savedInfo")});let{savedInfo:t,...o}=e;return o}return e}case"PIN_SHOW_SUGGESTED_CREATOR_RECS":if(t.payload.id===e.id)return{...e,show_suggested_creator_recs:t.payload.value};return e;case"PIN_QUICK_SAVE":{let{pinId:o,boardId:s,localPinId:i,title:n,url:l,nodeId:d}=t.payload;if(o===e.id)return r&&d&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(d);t||(t=e.create(d,"Pin"));let r=t.getOrCreateLinkedRecord("savedInfo","SaveTarget");r.setValue(s,"boardId"),r.setValue(i,"localPinId"),r.setValue(null,"score"),r.setValue(null,"sectionId"),r.setValue__UNSAFE(n,"title"),r.setValue(null,"type"),r.setValue(l,"url")}),{...e,savedInfo:{boardId:s,localPinId:i,title:n,url:l}};return e}case"PIN_SHOW_FEEDBACK":{let{id:s,value:i,text:n,nodeId:l}=t.payload;if(s===e.id)return r&&l&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(l);t||(t=e.create(l,"Pin")),t.setValue(i,"showFeedback");let r=t.getOrCreateLinkedRecord("feedbackText","FeedbackText");r.setValue__UNSAFE(n?.title,"title"),r.setValue__UNSAFE(n?.subTitle,"subTitle");let{unfollow:a,undoCallbackProps:s}=n??{},d=r.getOrCreateLinkedRecord("unfollow","Unfollow");d.setValue(a?.action,"action"),d.setValue__UNSAFE(a?.title,"title"),d.setValue__UNSAFE(a?.subTitle,"subTitle");let _=r.getOrCreateLinkedRecord("undoCallbackProps","UndoCallbackProps");_.setValue(s?.action,"action"),_.setValue(s?.viewType,"viewType"),_.setValue(s?.viewParameter,"viewParameter");let u=(t,r)=>{let a=t.getOrCreateLinkedRecord("actionOptions","ActionOptions");if(a.setValue(r?.board_id,"boardId"),a.setValue(r?.interest_id,"interestId"),a.setValue(r?.interest_list,"interestList"),a.setValue(r?.complaint_reason,"complaintReason"),a.setValue(r?.feedback_type,"feedbackType"),a.setValue(r?.pin_id,"pinId"),a.setValue(r?.pin_type,"pinType"),a.setValue(r?.pin,"pin"),a.setValue(r?.promoted,"promoted"),a.setValue(r?.recommendation_reason_id,"recommendationReasonId"),a.setValue(r?.undo,"undo"),a.setValue(r?.user_id,"userId"),a.setValue(r?.query,"query"),a.setValue(r?.news_id,"newsId"),a.setValue(r?.through_id,"throughId"),a.setValue(r?.client_tracking_params,"clientTrackingParams"),a.setValue(r?.is_third_party_ad,"isThirdPartyAd"),r?.through_properties){let t=Object.entries(r.through_properties).map(([t,r])=>{let a=e.create((0,o.Z)(),"ThroughProperties");return a?.setValue(r,"data"),a?.setValue(t,"key"),a});a.setLinkedRecords(t,"throughProperties")}};u(d,a?.actionOptions),u(_,s?.actionOptions)}),{...e,showFeedback:i,feedbackText:n};return e}case"PIN_UPDATE_COMMENT_COUNT":{let{id:r,increment:a}=t.payload;if(r===e.id&&e.aggregated_pin_data){let t={...e.aggregated_pin_data,comment_count:(e.aggregated_pin_data.comment_count||0)+a};return{...e,aggregated_pin_data:t}}return e}case"PIN_DID_IT":{let{id:r,value:a}=t.payload;if(r===e.id){let t=(e.aggregated_pin_data||{}).did_it_data,r={...t,images_count:(t?.images_count||0)+(a?1:-1)},o={...e.aggregated_pin_data,did_it_data:r};return{...e,aggregated_pin_data:o,done_by_me:a}}return e}case"PIN_SHOW_FEEDBACK_OVERLAY":{let{id:o,value:s,nodeId:i}=t.payload;if(o===e.id)return r&&i&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(i);t||(t=e.create(i,"Pin")),t.setValue(s,"showFeedbackOverlay")}),{...e,showFeedbackOverlay:s};return e}case"PIN_SHOW_AD_REASONS_MODAL":if(t.payload.id===e.id)return{...e,show_ad_reasons:t.payload.value};return e;case"PIN_SHOW_FEWER_WEIGHT_LOSS_ADS_MODAL":if(t.payload.id===e.id)return{...e,show_fewer_weight_loss_ads:t.payload.value};return e;case"APPROVE_PIN_SPONSORSHIP":{let{isApproved:r,pinId:a}=t.payload;if(a===e.id)return{...e,sponsorship:{...e.sponsorship,sponsor:r?e.sponsorship?.sponsor:void 0,status:r?1:2}};return e}case"DELETE_PIN_SPONSORSHIP":{let{pinId:r,userId:a}=t.payload;if(r===e.id){if(a===e.sponsorship?.creator?.id)return{...e,sponsorship:void 0};else if(a===e.sponsorship?.sponsor?.id)return{...e,sponsorship:{...e.sponsorship,sponsor:void 0,status:3}}}return e}case"PIN_UPDATE_REACTION_COUNT":{let{id:r,increment:a,reactionType:o}=t.payload;if(r===e.id){let{reaction_counts:t={}}=e,r=t[o]||0,s=a?r+1:Math.max(r-1,0),i=a?o:0;if(0!==s)return{...{...e,reaction_counts:{...t,[o]:s},reaction_by_me:i}};{let r={...e,reaction_counts:{...t},reaction_by_me:i};return delete r.reaction_counts[o],{...r}}}return e}case"PIN_BETTER_SAVE":{let{pinId:o,boardId:s,localPin:i,localPinId:n,sectionId:l,title:d,type:_,url:u,nodeId:c}=t.payload;if(o===e.id)return r&&c&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(c);t||(t=e.create(c,"Pin"));let r=t.getOrCreateLinkedRecord("savedInfo","SaveTarget");r.setValue(s,"boardId"),r.setValue(n,"localPinId"),r.setValue(null,"score"),r.setValue(l,"sectionId"),r.setValue__UNSAFE(d,"title"),r.setValue(_,"type"),r.setValue(u,"url")}),{...e,savedInfo:{boardId:s??"",localPinId:n||i&&i.id,sectionId:l,title:d,type:_,url:u}};return e}case"PIN_BETTER_SAVE_CUTOUT":{let{pinId:o,boardId:s,localPinId:i,title:n,type:l,url:d,nodeId:_}=t.payload;if(o===e.id)return r&&_&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(_);t||(t=e.create(_,"Pin"));let r=t.getOrCreateLinkedRecord("savedCutout","SaveTarget");r.setValue(s,"boardId"),r.setValue(i,"localPinId"),r.setValue__UNSAFE(n,"title"),r.setValue(l,"type"),r.setValue(d,"url")}),{...e,savedCutout:{boardId:s??"",localPinId:i,title:n,type:l,url:d}};return e}case"PIN_BETTER_UNSAVE":{let{pinId:o,nodeId:s}=t.payload;if(o===e.id){r&&s&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(s);t&&t.setValue(null,"savedInfo")});let{savedInfo:t,...o}=e;return o}return e}case"PIN_BETTER_UNSAVE_CUTOUT":{let{pinId:o,nodeId:s}=t.payload;if(o===e.id){r&&s&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(s);t&&t.setValue(null,"savedCutout")});let t={...e};return delete t.savedCutout,{...t}}return e}case"PIN_BETTER_SELECT_BOARD_CUTOUT":case"PIN_BETTER_SELECT_BOARD_OR_SECTION":{let{pinId:o,boardId:s,sectionId:i,score:n,title:l,type:d,url:_,nodeId:u}=t.payload;if(o===e.id)return r&&u&&(0,a.commitLocalUpdate)(r,e=>{let t=e.get(u);t||(t=e.create(u,"Pin"));let r=t.getOrCreateLinkedRecord("selectedItem","SaveTarget");r.setValue(s,"boardId"),r.setValue(null,"localPinId"),r.setValue(n,"score"),r.setValue(i,"sectionId"),r.setValue__UNSAFE(l,"subTitle"),r.setValue(d,"type"),r.setValue(_,"url")}),{...e,selectedItem:{boardId:s??"",sectionId:i,score:n,title:l,type:d,url:_}};return e}case"DELETE_PIN_MENTION":{let{pinId:r,userId:a}=t.payload;if(r===e.id){let{story_pin_data:t}=e;if(!t)return e;let{pages:r=[]}=t,o=r.map(e=>{let{blocks:t=[]}=e,r=t.map(e=>e.type===l.h8.MENTION_STICKER&&e.user_id===a?{...e,is_removed:!0}:e);return{...e,blocks:r}});return{...{...e,story_pin_data:{...t,pages:o}}}}return e}case"PIN_FAVORITE":{let{id:r,increment:a,value:o}=t.payload,{favorite_user_count:s=0}=e;if(r===e.id)return{...e,favorited_by_me:o,favorite_user_count:s+a};return e}default:return e}}let T=(0,d.Z)("pins",(e,t)=>{let r=e||{},o=(0,y.Ig)();switch(t.type){case n.zP:case n.aW:{let{options:e,resource:a,response:{resource_response:{data:o}}}=t.payload,{isDesktop:s}=e||{};if(a in E){let e=E[a](o)||[],t={...r};return e.forEach(e=>{e.type&&"pin"!==e.type||(t[e.id]=f(r[e.id],e,!0))}),t}if(("PinResource"===a||"PinPageResource"===a)&&o){let{preserve_component_state:t=!1}=e??{},a=o||{};return{...r,[a.id]:t?f(a,r[a.id]):f(r[a.id],a)}}if("ApiResource"===a&&e?.url?.match(/\/v3\/pins\/([0-9]|[a-z]|[A-Z])+\/board_title_suggestions\//)){if(t.type===n.zP&&t.payload.options?.pin_id)return R(r,{id:t.payload.options.pin_id,boardTitleSuggestions:t.payload.response.resource_response.data.map(e=>e.title)});}else if("BoardPickerBoardsResource"!==a||s){if("PinInterestsResource"===a){if(t.type===n.zP&&t.payload.options?.pinId){let{options:e,response:a}=t.payload,o=a.resource_response.data;if(o?.length)return R(r,{id:e.pinId,related_interest_ids:o.map(e=>e.id)})};}else if("StoryPinTaggedProductsResource"===a){if(t.type===n.zP){let{response:e}=t.payload,a=e.resource_response.data;if(a?.[0])return a.reduce((e,t)=>R(e,t),r)};}}else{if(t.type===n.zP&&t.payload.normalizedResponse&&t.payload.options?.pin_id){let e=t.payload.options.pin_id,{boards_shortlist:a}=t.payload.normalizedResponse.result;return R(r,{id:e,boards_shortlist:a})};}return r}case n.AF:let{payload:s}=t,i=({name:e,url:t,privacy:r,boardNodeId:s,boardId:i,nodeId:n})=>{o&&n&&(0,a.commitLocalUpdate)(o,a=>{let o=a.get(n);o||(o=a.create(n,"Pin")),r&&o.setValue(r,"privacy");let l=a.get(s);l||((l=a.create(s,"Board")).setValue(i,"entityId"),l.setValue(e,"name"),l.setValue(t,"url"),l.setValue("board","type")),o.setLinkedRecord(l,"pinnedToBoard")})};if("RepinResource"===s.resource){let{pin_id:e,board_id:t}=s.options,{board:a}=s.response.resource_response.data,{name:o,url:n,privacy:l,node_id:d}=a;return i({name:o,url:n,privacy:l,boardNodeId:d,nodeId:r?.[e]?.node_id,boardId:t}),R(r,{id:e,pinned_to_board:{id:t,name:o,url:n,node_id:d,type:"board"},privacy:l})}if("BoardResource"===s.resource&&s.options.initial_pins){let e=s.options.initial_pins[0],{name:t,id:a,url:o,node_id:n}=s.response.resource_response.data;return i({name:t,url:o,boardNodeId:n,nodeId:r?.[e]?.node_id,boardId:a}),R(r,{id:e,pinned_to_board:{id:a,name:t,url:o,node_id:n,type:"board"}})}return r;case"CHANGE_CAROUSEL_SLOT_INDEX":case"PIN_DID_IT":case"PIN_SAVE":case"PIN_SHOW_SUGGESTED_CREATOR_RECS":case"PIN_UNSAVE":case"PIN_UPDATE_COMMENT_COUNT":case"SET_PIN_COMMENTS_DISABLED":case"PIN_SHOW_FEEDBACK":case"PIN_SHOW_FEEDBACK_OVERLAY":case"PIN_FEEDBACK":case"PIN_SHOW_AD_REASONS_MODAL":case"PIN_SHOW_FEWER_WEIGHT_LOSS_ADS_MODAL":case"PIN_FAVORITE":case"PIN_UPDATE_REACTION_COUNT":{let{id:e}=t.payload;if(!r[e])return r;return{...r,[e]:m(r[e],t)}}case"PIN_BETTER_SAVE":{let{payload:{localPin:e,pinId:a}}=t,o={...r};return e&&"pin"===e.type&&(o[e.id]=e),r[a]&&(o[a]=m(r[a],t)),o}case"PIN_BETTER_SAVE_CUTOUT":{let{payload:{localPin:e,pinId:a,nodeId:o}}=t,s={...r};return e&&"pin"===e.type&&(s[e.id]=e),r&&(s[a]=m(r[a]??{id:a,node_id:o,type:"pin"},t)),s}case"PIN_BETTER_SELECT_BOARD_CUTOUT":{let{pinId:e,nodeId:a}=t.payload,o={...r};return r&&(o[e]=m(r[e]??{id:e,node_id:a,type:"pin"},t)),o}case"APPROVE_PIN_SPONSORSHIP":case"DELETE_PIN_SPONSORSHIP":case"PIN_BETTER_UNSAVE":case"PIN_BETTER_UNSAVE_CUTOUT":case"PIN_BETTER_SELECT_BOARD_OR_SECTION":case"PIN_QUICK_SAVE":case"DELETE_PIN_MENTION":{let{pinId:e}=t.payload;if(!r[e])return r;return{...r,[e]:m(r[e],t)}}case"UPDATE_PINS_WITH_QUICKSAVE_REPIN":{let{payload:{newPin:e}}=t;if(e&&"pin"===e.type)return{...r,[e.id]:e};return r}case"PIN_REMOVE_USER_STORY_PIN_TAGGED_PRODUCTS":{let{payload:{blocksIds:e,pinId:a}}=t,o={...r},s=o[a];return s={...s,story_pin_data:{...s.story_pin_data,pages:s.story_pin_data?.pages?.map(t=>(t.blocks=t.blocks?.map(t=>("story_pin_product_sticker_block"===t.type&&e.includes(t.pin_id||"")&&(t.is_removed=!0),t)),t))??[]}},o[a]=s,o}case"NFT_FETCH_DATA":{let{payload:{data:e}}=t;return{...r,[e.id]:e}}case"UPDATE_PIN_REACTION_COUNT":let{pinId:l,increment:d,reactionType:_}=t.payload;if(!r[l])return r;let u=r[l].reaction_counts??{},c=u[_]??0,p=d?c+1:Math.max(c-1,0);return 0===p?(delete r[l].reaction_counts?.[_],R(r,{id:l,reaction_counts:{...u}})):R(r,{id:l,reaction_counts:{...u,[_]:p}});case"PIN_DELETE":{let{pinId:e}=t.payload;return{...Object.keys(r).reduce((t,a)=>(a!==e&&(t[a]=r[a]),t),{})}}case"PIN_EDIT":{let{pinId:e,description:a,boardId:o,sectionId:s,title:i}=t.payload;return R(r,{id:e,closeup_user_note:a,board:{id:o,type:"board"},section:{id:s},title:i,unified_user_note:a})}case"ONE_TAP_SAVE":{let{boardId:e,localPinId:s,pinId:i,nodeId:n}=t.payload;if(r[i])return o&&n&&(0,a.commitLocalUpdate)(o,t=>{let r=t.get(n);r||(r=t.create(n,"Pin"));let a=r.getOrCreateLinkedRecord("savedInfo","SaveTarget");a.setValue(e,"boardId"),a.setValue(s,"localPinId"),a.setValue(null,"score"),a.setValue(null,"sectionId"),a.setValue__UNSAFE(null,"title"),a.setValue(null,"type"),a.setValue(null,"url")}),R(r,{id:i,savedInfo:{boardId:e,localPinId:s}})}return r;case"ONE_TAP_UNSAVE":{let{pinId:e,nodeId:s}=t.payload,i=r[e];if(!i)return r;o&&s&&(0,a.commitLocalUpdate)(o,e=>{let t=e.get(s);t&&t.setValue(null,"savedInfo")});let{savedInfo:n,...l}=i;return{...r,[e]:l}}default:return r}})},951255:(e,t,r)=>{r.d(t,{Cp:()=>_,rh:()=>u,XT:()=>d,xw:()=>c});var a=r(14890);let o={current:null,locationToErrorMap:{}},s={step:"welcome"},i={images:[]},n={images:[]},l={recentSaves:[],recentUpsell:{}},d={mainComponent:(e,t)=>{if(e=e||o,"SET_LOCATION_TO_ERROR_MAP_ENTRY"===t.type){let r={...e.locationToErrorMap};return r[t.payload.pathname]=t.payload.renderError,{...e,locationToErrorMap:r}}if("UNSET_LOCATION_TO_ERROR_MAP_ENTRY"===t.type){let r={...e.locationToErrorMap};return delete r[t.payload.pathname],{...e,locationToErrorMap:r}}return e}},_={nuxSelectedInterestImages:(e,t)=>(e=e||i,"SET_NUX_SELECTED_INTEREST_IMAGES"===t.type)?{...e,images:t.payload.images}:e,nuxSelectedPinImages:(e,t)=>(e=e||n,"SET_NUX_SELECTED_PIN_IMAGES"===t.type)?{...e,images:t.payload.images}:e,nuxProgress:(e,t)=>(e=e||s,"SET_NUX_PROGRESS"===t.type)?{...e,step:t.payload.step}:e,postRepinMoreIdeasUpsell:(e,t)=>{switch(e=e||l,t.type){case"PIN_BETTER_SAVE":{let{localPin:r,boardId:a}=t.payload;if(!r||!a)return e;return{...e,recentSaves:[{boardId:a},...e.recentSaves]}}case"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN":{let{boardId:r}=t.payload;return{...e,recentUpsell:{...e.recentUpsell,[r]:Date.now()}}}default:return e}}},u=(0,a.combineReducers)({...d,..._}),c=(0,a.combineReducers)(d)},149590:(e,t,r)=>{r.d(t,{ZP:()=>_});var a=r(874322),o=r(421764);let s=["SearchResource","UserFollowingResource"],i=(e,t)=>({...e,[t.id]:{...e[`${t.id}`],...t}}),n=(e,t)=>t.reduce((e,t)=>{let{type:r}=t;return r&&"user"!==r?e:i(e,t)},{...e});function l(e,t){switch(t.type){case"UPDATE_USER_PIN_COUNT":{let{payload:{increment:r}}=t;return{...e,pin_count:(e.pin_count||0)+r}}case"USER_FOLLOW":let{value:r}=t.payload;return{...e,explicitly_followed_by_me:r,follower_count:(e.follower_count??0)+(r?1:-1)};case"USER_FOLLOWING_COUNT":let{following:a}=t.payload;return{...e,following_count:(e?.following_count??0)+(a?1:-1)};case"USER_BLOCK":return{...e,blocked_by_me:t.payload.value,...t.payload.value?{explicitly_followed_by_me:!1}:{}};default:return e}}function d(e){let t=(e&&e.id)??"";return{[t]:{...e||{},id:t}}}function _(e){let t=(e&&e.id)??"";return(0,o.Z)("users",(r=d(e),o)=>{let _=t?r[t]:void 0;switch(o.type){case"REPLACE_STATE":return{...r,...o.payload.users};case"BOARD_SECTION_DELETE":{let{userId:e,pinCount:t}=o.payload,a=r[e]?.pin_count??0;return i(r,{id:e,pin_count:a-t})}case a.AF:{let{options:e,resource:t,response:a}=o.payload,s=e.user_id;if(s){let{board_count:o=0,pin_count:n=0}=r[s]||{},{resource_response:l}=a;if("BoardResource"===t){let{initial_pins:t}=e,{owner:a={}}=l.data;return i(r,{id:s,pin_count:a.pin_count||n+t.length,board_count:o+1,last_repin_id:t[0]})}if("RepinResource"===t||"PinResource"===t&&"uploaded"===e.method){let{pin_id:t}=e,{pinner:a={}}=l.data;return i(r,{id:s,pin_count:(a.pin_count||n)+1,last_repin_id:t})}}return r}case a.zP:case a.aW:let{resource:u,normalizedResponse:c,options:p,response:{resource_response:{data:E}}}=o.payload;if(o.type===a.zP&&"BoardPickerBoardsResource"===u&&c)return i(r,{id:p?.user_id||"",recent_boards:c.result.boards_shortlist});if("UserResource"===u&&E)return i(r,E);if(s.includes(u)&&E)return n(r,E);if("TodayArticleResource"===u&&E?.article_creator_user)return i(r,E.article_creator_user);if("TodayArticleFeedResource"===u&&Array.isArray(E))return n(r,E.filter(e=>"story"===e.type&&e.user?.type==="user").map(e=>e.user));return r;case"USER_BLOCK":let{payload:{id:y}}=o;if(r[y])return{...r,[y]:l(r[y],o)};return r;case"USER_FOLLOW":let{payload:{id:f}}=o;if(r[f])return{...r,[f]:l(r[f],o)};return r;case"USER_FOLLOWING_COUNT":let{payload:{id:R}}=o;if(r&&r[R])return{...r,[R]:l(r[R],o)};return r;case"USER_BULK_FOLLOW":let{ids:m,value:T}=o.payload,I={...r};return m.forEach(e=>{let t=r[e];I[e]={...t,explicitly_followed_by_me:T}}),I;case"USER_SETTING_CHANGE":return i(r,{id:o.payload.id,[o.payload.field]:o.payload.value});case"USER_PARTNER_SETTING_CHANGE":let S;return S={id:o.payload.id,partner:{[o.payload.field]:o.payload.value}},{...r,[S.id]:{...r[S.id],partner:{...r[S.id].partner,...S.partner}}};case"UPDATE_USER_PIN_COUNT":{let{payload:{userId:e}}=o;if(r[e])return{...r,[e]:l(r[e],o)};return r}case"UPDATE_USER_SCHEDULED_PIN_COUNT":{let{payload:{userId:e,increment:t}}=o,a=r[e],s=a.scheduled_pin_count||0;return{...r,[e]:{...a,scheduled_pin_count:s+t}}}case"PROFILE_COVER_SOURCE":let{payload:{coverSource:g,id:P}}=o,O=r[P]||{};return{...r,[P]:{...O,profile_cover:g}};case"BOARD_CREATE_COMPLETE":if(_&&!_.has_quicksave_board)return{...r,[_.id]:{..._,board_count:void 0===_.board_count?void 0:_.board_count+1}};return r;case"BOARD_DELETE":if(_){let{boardPinCount:e}=o.payload,t=_.pin_count??0;return{...r,[_.id]:{..._,board_count:_.board_count?_.board_count-1:_.board_count,pin_count:t-(e??0)}}}return r;case"PIN_DELETE":return i(r,{id:o.payload.userId,pin_count:(r[o.payload.userId]?.pin_count??0)-1});case"PIN_ADD":let{pinnerId:A}=o.payload;return i(r,{id:A,pin_count:(r[A]?.pin_count??0)+1});case"SET_PERSONALIZATION_COOKIES":if(_){let{payload:e}=o;return{...r,[_.id]:{..._,allow_personalization_cookies:e.value}}}return r;case"SET_ANALYTICS_COOKIES":if(_){let{payload:e}=o;return{...r,[_.id]:{..._,allow_analytic_cookies:e.value}}}return r;case"SET_MARKETING_COOKIES":if(_){let{payload:e}=o;return{...r,[_.id]:{..._,allow_marketing_cookies:e.value}}}return r;case"ALLOW_ALL_COOKIES":if(_)return{...r,[_.id]:{..._,allow_personalization_cookies:!0,allow_analytic_cookies:!0,allow_marketing_cookies:!0}};return r;case"REJECT_ALL_COOKIES":if(_)return{...r,[_.id]:{..._,allow_personalization_cookies:!1,allow_analytic_cookies:!1,allow_marketing_cookies:!1}};return r;case"AUTHENTICATE_USER":case"REGISTER_USER":let N=o.payload.user.id;return t=N,{...r,[N]:{...r[N],...o.payload.user}};case"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX":let b=o.payload;if(_&&_.firstHomeFeedRequestAfterNux!==b)return{...r,[_.id]:{..._,firstHomeFeedRequestAfterNux:b}};return r;case"UPDATE_USER_SET":if(_){let e=o.payload.partner?{..._.partner,...o.payload.partner}:_.partner;return{...r,[_.id]:{..._,...o.payload,partner:e}}}return r;case"UPDATE_USER_SOCIAL_NETWORK":if(_){let e=o.payload.socialNetworkName;return{...r,[_.id]:{..._,[`connected_to_${e}`]:o.payload.connected}}}return r;case"UPDATE_HAS_QUICKSAVE_BOARD":let{createdQuicksaveBoard:h}=o.payload;if(_&&_.has_quicksave_board!==h){let{createdQuicksaveBoard:e}=o.payload;return{...r,[_.id]:{..._,has_quicksave_board:e}}}return r;case"UPDATE_USER_SAVE_BEHAVIOR":let{saveBehavior:U}=o.payload;if(_&&_.save_behavior!==U)return{...r,[_.id]:{..._,save_behavior:U}};return r;case"USER_DOMAIN_VERIFIED":if(_&&_.verified_user_websites){let{verifiedWebsite:e}=o.payload;return{...r,[_.id]:{..._,verified_user_websites:[..._.verified_user_websites,e],is_any_website_verified:!0}}}return r;case"USER_DOMAIN_UNVERIFIED":if(_&&_.verified_user_websites){let{verifiedWebsite:e}=o.payload,t=_.verified_user_websites&&_.verified_user_websites.indexOf(e),a=_.verified_user_websites&&_.verified_user_websites.slice(0);return a&&a.splice(t,1),{...r,[_.id]:{..._,verified_user_websites:a,isAnyWebsiteVerified:a&&a.length>0}}}return r;default:return r}})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/82819-a072527787301706.mjs.map